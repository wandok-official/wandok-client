# 코드 리뷰 가이드

이 문서는 PR 작성 규칙과 코드 리뷰 프로세스를 정의합니다.

<br>

## 목차
- [코드 리뷰 가이드](#코드-리뷰-가이드)
  - [목차](#목차)
  - [1. PR 작성 규칙](#1-pr-작성-규칙)
    - [1.1 PR 생성 전 체크리스트](#11-pr-생성-전-체크리스트)
    - [1.2 PR 제목](#12-pr-제목)
    - [1.3 PR 본문](#13-pr-본문)
    - [1.4 이슈 연결](#14-이슈-연결)
  - [2. 코드 리뷰 프로세스](#2-코드-리뷰-프로세스)
    - [2.1 리뷰 관점](#21-리뷰-관점)
    - [2.2 피드백 우선순위](#22-피드백-우선순위)
    - [2.3 리뷰 코멘트 작성법](#23-리뷰-코멘트-작성법)
  - [3. 병합 조건](#3-병합-조건)
  - [4. 병합 후](#4-병합-후)

---
<br>

## 1. PR 작성 규칙

### 1.1 PR 생성 전 체크리스트

PR을 생성하기 전에 다음 항목을 확인합니다.

- [ ] 가장 최근 브랜치를 pull 하였습니다.
- [ ] base 브랜치명을 확인하였습니다. (일반적으로 `development`)
- [ ] compare 브랜치명을 확인하였습니다.
- [ ] 코드 컨벤션을 모두 점검했습니다.
- [ ] 테스트 코드가 작성되어 있습니다.
- [ ] 변경 사항으로 인해 생성되는 경고가 없는 것을 확인했습니다.
- [ ] Self Review를 완료하였습니다.

### 1.2 PR 제목

커밋 컨벤션과 동일한 형식으로 작성합니다.

```
<type>: <설명>
```

| 타입 | 용도 |
| :--- | :--- |
| `feat` | 새로운 기능 |
| `fix` | 버그 수정 |
| `refactor` | 리팩토링 |
| `test` | 테스트 코드 |
| `docs` | 문서 작업 |
| `chore` | 설정, 빌드, 의존성 등 |
| `hotfix` | 긴급 수정 |
| `release` | 릴리스 준비 |

예시:
```
feat: 포커스 모드 구현
fix: 블러 영역 겹침 현상 수정
```

### 1.3 PR 본문

프로젝트에 설정된 [PR 템플릿](../.github/PULL_REQUEST_TEMPLATE.md)을 활용하여 작성합니다.

- **자가 점검 리스트**: 자가 점검 리스트를 모두 확인합니다.
- **관련 이슈**: 관련된 이슈 번호를 기재합니다.
- **무엇을 했나요?**: 변경 내용을 간결하게 설명합니다.
- **참고 사항**: 코드 작업 시 고려했던 점, 선택한 방법의 장단점 등을 작성합니다.
- **스크린샷**: UI 변경이 있다면 스크린샷을 첨부합니다.

### 1.4 이슈 연결

PR 본문의 "관련 이슈" 섹션에 `#이슈번호` 형식으로 이슈를 연결합니다.

```markdown
# 관련 이슈
- #42
```

---
<br>

## 2. 코드 리뷰 프로세스

### 2.1 리뷰 관점

코드 리뷰 시 다음 관점에서 검토합니다.

| 관점 | 설명 |
| :--- | :--- |
| 정확성 | 의도한 대로 동작하는가? 엣지 케이스는 처리되었는가? |
| 가독성 | 코드를 읽고 이해하기 쉬운가? 변수/함수명이 명확한가? |
| 컨벤션 | [코드 컨벤션](./CODE_CONVENTION.md)을 준수하고 있는가? |
| 테스트 | 적절한 테스트가 작성되었는가? |
| 사이드 이펙트 | 다른 기능에 영향을 주지 않는가? |

### 2.2 피드백 우선순위

리뷰 코멘트에 우선순위를 명시하여, 작성자가 반영 범위를 판단할 수 있도록 합니다.

**`P1: 필수 반영`**

- 서비스에 중대한 오류를 발생시킬 수 있는 코드
- 반드시 수정이 필요한 경우

**`P2: 권장 반영`**

- 코드 품질 향상을 위해 권장되는 수정 사항
- 반영하지 못할 경우, 그 이유를 명시하거나 향후 반영 계획을 제시해야 합니다.

**`P3: 선택 반영`**

- 반영 여부는 작성자의 판단에 따릅니다.
- 무응답으로 넘어가도 무방합니다.

코멘트 작성 예시:
```
[P1] null 체크가 빠져 있어 런타임 에러가 발생할 수 있습니다.

[P2] 이 로직을 유틸 함수로 분리하면 재사용성이 높아질 것 같습니다.

[P3] 개인적으로 이 변수명은 isVisible이 더 직관적인 것 같습니다.
```

### 2.3 리뷰 코멘트 작성법

- **구체적으로**: 문제가 무엇이고 왜 문제인지 설명합니다.
- **건설적으로**: 대안이나 개선 방향을 함께 제시합니다.
- **GitHub Suggestion 활용**: 간단한 수정은 suggestion 기능을 사용합니다.

```suggestion
// GitHub에서 제공하는 suggestion 블록을 활용하면
// 리뷰어가 제안한 코드를 클릭 한 번으로 반영할 수 있습니다.
```

---
<br>

## 3. 병합 조건

PR을 병합하기 위해 다음 조건을 충족해야 합니다.

| 조건 | 설명 |
| :--- | :--- |
| 승인 | 작성자 본인을 제외한 1건 이상의 Approve |
| P1 코멘트 | 모두 해결(Resolved) 필수 |
| P2 코멘트 | 작성자와 리뷰어 간 합의 후 병합 가능 (미반영 시 사유 명시 또는 후속 이슈 생성) |
| CI | 린트 및 테스트 통과 |
| base 브랜치 | 일반적으로 `development` (릴리스/핫픽스의 경우 [브랜치 전략](./BRANCH_STRATEGY.md#4-병합-규칙) 참고) |

---
<br>

## 4. 병합 후

- 병합이 완료된 작업 브랜치는 **삭제**합니다.
- 로컬에서도 삭제된 원격 브랜치를 정리합니다.

```bash
# 원격에서 삭제된 브랜치를 로컬에서 정리
git fetch --prune
```

---

[← 협업 가이드로 돌아가기](./CONTRIBUTING.md)
